# ç±»å‹ï¼ˆTypesï¼‰ï¼Œç¬¬ä¸€éƒ¨åˆ†

åœ¨["è¯­æ³•"ç« èŠ‚](../01_intro/01_syntax.md)ä¸­ï¼Œ`compute` çš„è¾“å…¥å‚æ•°ç±»å‹ä¸º `u32`ã€‚\
è®©æˆ‘ä»¬æ¥è¯¦ç»†è§£é‡Šä¸€ä¸‹è¿™_æ„å‘³ç€_ä»€ä¹ˆã€‚

## åŸºæœ¬ç±»å‹ï¼ˆPrimitive typesï¼‰

`u32` æ˜¯ Rust çš„**åŸºæœ¬ç±»å‹ï¼ˆprimitive typesï¼‰**ä¹‹ä¸€ã€‚åŸºæœ¬ç±»å‹æ˜¯è¯­è¨€ä¸­æœ€åŸºç¡€çš„æ„å»ºå—ã€‚
å®ƒä»¬å†…ç½®äºè¯­è¨€æœ¬èº«â€”â€”ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä»¬ä¸æ˜¯ç”¨å…¶ä»–ç±»å‹æ¥å®šä¹‰çš„ã€‚

ä½ å¯ä»¥ç»„åˆè¿™äº›åŸºæœ¬ç±»å‹æ¥åˆ›å»ºæ›´å¤æ‚çš„ç±»å‹ã€‚æˆ‘ä»¬å¾ˆå¿«å°±ä¼šçœ‹åˆ°å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹ã€‚

## æ•´æ•°ï¼ˆIntegersï¼‰

`u32` ç‰¹åˆ«åœ°ï¼Œæ˜¯ä¸€ä¸ª**æ— ç¬¦å· 32 ä½æ•´æ•°ï¼ˆunsigned 32-bit integerï¼‰**ã€‚

æ•´æ•°ï¼ˆintegerï¼‰æ˜¯ä¸€ä¸ªå¯ä»¥ä¸å¸¦å°æ•°éƒ¨åˆ†ä¹¦å†™çš„æ•°å­—ã€‚ä¾‹å¦‚ `1` æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œè€Œ `1.2` ä¸æ˜¯ã€‚

### æœ‰ç¬¦å·ï¼ˆSignedï¼‰vs. æ— ç¬¦å·ï¼ˆUnsignedï¼‰

æ•´æ•°å¯ä»¥æ˜¯**æœ‰ç¬¦å·ï¼ˆsignedï¼‰**æˆ–**æ— ç¬¦å·ï¼ˆunsignedï¼‰**çš„ã€‚\
æ— ç¬¦å·æ•´æ•°åªèƒ½è¡¨ç¤ºéè´Ÿæ•°ï¼ˆå³ `0` æˆ–æ›´å¤§çš„æ•°ï¼‰ã€‚
æœ‰ç¬¦å·æ•´æ•°å¯ä»¥è¡¨ç¤ºæ­£æ•°å’Œè´Ÿæ•°ï¼ˆä¾‹å¦‚ `-1`ã€`12` ç­‰ï¼‰ã€‚

`u32` ä¸­çš„ `u` ä»£è¡¨**æ— ç¬¦å·ï¼ˆunsignedï¼‰**ã€‚\
æœ‰ç¬¦å·æ•´æ•°çš„ç­‰æ•ˆç±»å‹æ˜¯ `i32`ï¼Œå…¶ä¸­ `i` ä»£è¡¨æ•´æ•°ï¼ˆintegerï¼‰ï¼Œå³å¯ä»¥æ˜¯æ­£æ•°æˆ–è´Ÿæ•°çš„ä»»ä½•æ•´æ•°ã€‚

### ä½å®½ï¼ˆBit widthï¼‰

`u32` ä¸­çš„ `32` æŒ‡çš„æ˜¯ç”¨äºåœ¨å†…å­˜ä¸­è¡¨ç¤ºæ•°å­—çš„**ä½æ•°[^bit]**ã€‚\
ä½æ•°è¶Šå¤šï¼Œèƒ½è¡¨ç¤ºçš„æ•°å­—èŒƒå›´å°±è¶Šå¤§ã€‚

Rust æ”¯æŒå¤šç§ä½å®½çš„æ•´æ•°ï¼š`8`ã€`16`ã€`32`ã€`64`ã€`128`ã€‚

ä½¿ç”¨ 32 ä½ï¼Œ`u32` å¯ä»¥è¡¨ç¤ºä» `0` åˆ° `2^32 - 1` çš„æ•°å­—ï¼ˆä¹Ÿç§°ä¸º [`u32::MAX`](https://doc.rust-lang.org/std/primitive.u32.html#associatedconstant.MAX)ï¼‰ã€‚\
ä½¿ç”¨ç›¸åŒæ•°é‡çš„ä½æ•°ï¼Œæœ‰ç¬¦å·æ•´æ•°ï¼ˆ`i32`ï¼‰å¯ä»¥è¡¨ç¤ºä» `-2^31` åˆ° `2^31 - 1` çš„æ•°å­—
ï¼ˆå³ä» [`i32::MIN`](https://doc.rust-lang.org/std/primitive.i32.html#associatedconstant.MIN)
åˆ° [`i32::MAX`](https://doc.rust-lang.org/std/primitive.i32.html#associatedconstant.MAX)ï¼‰ã€‚\
`i32` çš„æœ€å¤§å€¼å°äº `u32` çš„æœ€å¤§å€¼ï¼Œå› ä¸ºæœ‰ä¸€ä½ç”¨äºè¡¨ç¤ºæ•°å­—çš„ç¬¦å·ã€‚æŸ¥çœ‹[äºŒè¿›åˆ¶è¡¥ç ](https://en.wikipedia.org/wiki/Two%27s_complement)è¡¨ç¤ºæ³•äº†è§£æ›´å¤šå…³äºæœ‰ç¬¦å·æ•´æ•°åœ¨å†…å­˜ä¸­è¡¨ç¤ºæ–¹å¼çš„è¯¦ç»†ä¿¡æ¯ã€‚

### æ€»ç»“

ç»“åˆä¸¤ä¸ªå˜é‡ï¼ˆæœ‰ç¬¦å·/æ— ç¬¦å·å’Œä½å®½ï¼‰ï¼Œæˆ‘ä»¬å¾—åˆ°ä»¥ä¸‹æ•´æ•°ç±»å‹ï¼š

| Bit width | Signed | Unsigned |
| --------- | ------ | -------- |
| 8-bit     | `i8`   | `u8`     |
| 16-bit    | `i16`  | `u16`    |
| 32-bit    | `i32`  | `u32`    |
| 64-bit    | `i64`  | `u64`    |
| 128-bit   | `i128` | `u128`   |

## å­—é¢é‡ï¼ˆLiteralsï¼‰

**å­—é¢é‡ï¼ˆliteralï¼‰** æ˜¯åœ¨æºä»£ç ä¸­è¡¨ç¤ºå›ºå®šå€¼çš„è®°å·ã€‚\
ä¾‹å¦‚ï¼Œ`42` æ˜¯è¡¨ç¤ºæ•°å­—å››åäºŒçš„ Rust å­—é¢é‡ã€‚

### å­—é¢é‡çš„ç±»å‹æ³¨è§£

ä½†æ˜¯ Rust ä¸­çš„æ‰€æœ‰å€¼éƒ½æœ‰ç±»å‹ï¼Œé‚£ä¹ˆ... `42` çš„ç±»å‹æ˜¯ä»€ä¹ˆï¼Ÿ

Rust ç¼–è¯‘å™¨ä¼šå°è¯•æ ¹æ®å­—é¢é‡çš„ä½¿ç”¨æ–¹å¼æ¥æ¨æ–­å…¶ç±»å‹ã€‚\
å¦‚æœä½ ä¸æä¾›ä»»ä½•ä¸Šä¸‹æ–‡ï¼Œç¼–è¯‘å™¨ä¼šå°†æ•´æ•°å­—é¢é‡é»˜è®¤ä¸º `i32`ã€‚\
å¦‚æœä½ æƒ³ä½¿ç”¨ä¸åŒçš„ç±»å‹ï¼Œä½ å¯ä»¥æ·»åŠ æ‰€éœ€çš„æ•´æ•°ç±»å‹ä½œä¸ºåç¼€â€”â€”ä¾‹å¦‚ï¼Œ`2u64` å°±æ˜¯ä¸€ä¸ªæ˜¾å¼ç±»å‹ä¸º `u64` çš„ 2ã€‚

### å­—é¢é‡ä¸­çš„ä¸‹åˆ’çº¿

ä½ å¯ä»¥ä½¿ç”¨ä¸‹åˆ’çº¿ `_` æ¥æé«˜å¤§æ•°å­—çš„å¯è¯»æ€§ã€‚\
ä¾‹å¦‚ï¼Œ`1_000_000` ä¸ `1000000` ç›¸åŒã€‚

## ç®—æœ¯è¿ç®—ç¬¦ï¼ˆArithmetic operatorsï¼‰

Rust æ”¯æŒä»¥ä¸‹æ•´æ•°çš„ç®—æœ¯è¿ç®—ç¬¦[^traits]ï¼š

- `+` åŠ æ³•ï¼ˆadditionï¼‰
- `-` å‡æ³•ï¼ˆsubtractionï¼‰
- `*` ä¹˜æ³•ï¼ˆmultiplicationï¼‰
- `/` é™¤æ³•ï¼ˆdivisionï¼‰
- `%` å–ä½™ï¼ˆremainderï¼‰

è¿™äº›è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§å’Œç»“åˆæ€§ä¸æ•°å­¦ä¸­çš„ç›¸åŒã€‚\
ä½ å¯ä»¥ä½¿ç”¨æ‹¬å·æ¥è¦†ç›–é»˜è®¤çš„ä¼˜å…ˆçº§ã€‚ä¾‹å¦‚ `2 * (3 + 4)`ã€‚

> âš ï¸ **è­¦å‘Šï¼ˆWarningï¼‰**
>
> é™¤æ³•è¿ç®—ç¬¦ `/` åœ¨ç”¨äºæ•´æ•°ç±»å‹æ—¶æ‰§è¡Œæ•´æ•°é™¤æ³•ã€‚
> ä¹Ÿå°±æ˜¯è¯´ï¼Œç»“æœä¼šå‘é›¶æˆªæ–­ã€‚ä¾‹å¦‚ï¼Œ`5 / 2` æ˜¯ `2`ï¼Œè€Œä¸æ˜¯ `2.5`ã€‚

## æ— è‡ªåŠ¨ç±»å‹å¼ºåˆ¶è½¬æ¢ï¼ˆNo automatic type coercionï¼‰

æ­£å¦‚æˆ‘ä»¬åœ¨ä¸Šä¸€ä¸ªç»ƒä¹ ä¸­è®¨è®ºçš„ï¼ŒRust æ˜¯ä¸€ç§é™æ€ç±»å‹è¯­è¨€ã€‚\
ç‰¹åˆ«æ˜¯ï¼ŒRust å¯¹ç±»å‹å¼ºåˆ¶è½¬æ¢éå¸¸ä¸¥æ ¼ã€‚å®ƒä¸ä¼šè‡ªåŠ¨å°†å€¼ä»ä¸€ç§ç±»å‹è½¬æ¢ä¸ºå¦ä¸€ç§ç±»å‹[^coercion]ï¼Œ
å³ä½¿è½¬æ¢æ˜¯æ— æŸçš„ã€‚ä½ å¿…é¡»æ˜¾å¼åœ°è¿›è¡Œè½¬æ¢ã€‚

ä¾‹å¦‚ï¼Œä½ ä¸èƒ½å°† `u8` å€¼èµ‹ç»™ç±»å‹ä¸º `u32` çš„å˜é‡ï¼Œå³ä½¿æ‰€æœ‰ `u8` å€¼éƒ½æ˜¯æœ‰æ•ˆçš„ `u32` å€¼ï¼š

```rust
let b: u8 = 100;
let a: u32 = b;
```

å®ƒä¼šæŠ›å‡ºç¼–è¯‘é”™è¯¯ï¼š

```text
error[E0308]: mismatched types
  |
3 |     let a: u32 = b;
  |            ---   ^ expected `u32`, found `u8`
  |            |
  |            expected due to this
  |
```

æˆ‘ä»¬å°†åœ¨æœ¬è¯¾ç¨‹çš„[åé¢éƒ¨åˆ†](../04_traits/09_from.md)çœ‹åˆ°å¦‚ä½•åœ¨ç±»å‹ä¹‹é—´è¿›è¡Œè½¬æ¢ã€‚

## å»¶ä¼¸é˜…è¯»ï¼ˆFurther readingï¼‰

- [Rust å®˜æ–¹ä¹¦ç±ä¸­çš„æ•´æ•°ç±»å‹ç« èŠ‚](https://doc.rust-lang.org/book/ch03-02-data-types.html#integer-types)

[^bit]: ä½ï¼ˆbitï¼‰æ˜¯è®¡ç®—æœºä¸­æœ€å°çš„æ•°æ®å•ä½ã€‚å®ƒåªèƒ½æœ‰ä¸¤ä¸ªå€¼ï¼š`0` æˆ– `1`ã€‚

[^traits]: Rust ä¸å…è®¸ä½ å®šä¹‰è‡ªå®šä¹‰è¿ç®—ç¬¦ï¼Œä½†å®ƒè®©ä½ æ§åˆ¶å†…ç½®è¿ç®—ç¬¦çš„è¡Œä¸ºã€‚
æˆ‘ä»¬å°†åœ¨è¯¾ç¨‹ä¸­[ç¨åè®¨è®ºè¿ç®—ç¬¦é‡è½½](../04_traits/03_operator_overloading.md)ï¼Œåœ¨æˆ‘ä»¬ä»‹ç»äº†ç‰¹è´¨ï¼ˆtraitï¼‰ä¹‹åã€‚

[^coercion]: è¿™ä¸ªè§„åˆ™æœ‰ä¸€äº›ä¾‹å¤–ï¼Œä¸»è¦ä¸å¼•ç”¨ã€æ™ºèƒ½æŒ‡é’ˆå’Œäººä½“å·¥ç¨‹å­¦æœ‰å…³ã€‚æˆ‘ä»¬å°†åœ¨[ç¨åä»‹ç»](../04_traits/07_deref.md)ã€‚
"æ‰€æœ‰è½¬æ¢éƒ½æ˜¯æ˜¾å¼çš„"è¿™ä¸ªå¿ƒç†æ¨¡å‹åœ¨ç°é˜¶æ®µä¼šå¯¹ä½ å¾ˆæœ‰å¸®åŠ©ã€‚

> ğŸ“– **åŸæ–‡é“¾æ¥**: [https://rust-exercises.com/100-exercises/02_basic_calculator/01_integers](https://rust-exercises.com/100-exercises/02_basic_calculator/01_integers)
